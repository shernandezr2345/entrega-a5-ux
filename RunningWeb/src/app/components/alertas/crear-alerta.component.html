<div class="crear-alerta-container">
  <!-- Navigation Rail -->
  <app-navigation-rail
    [showMenu]="false"
    [showFab]="false"
    [alignment]="'Top'"
    [navItems]="'7'"
    (navItemSelected)="onNavItemSelected($event)"
    class="navigation-rail"
  ></app-navigation-rail>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Header -->
    <div class="header">
      <h1 class="page-title">Crear alerta</h1>
      <button class="add-button" type="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </button>
    </div>

    <!-- Form Card - Layout correcto según Figma -->
    <div class="form-card">
      <div class="form-layout">
        
        <!-- Columna 1: Datos básicos -->
        <div class="form-column datos-basicos">
          <h2 class="section-title">
            <span class="section-number">1.</span>
            Datos básicos
          </h2>
          
          <!-- Fila 1: Nombre y Tipo -->
          <div class="form-row">
            <div class="form-item">
              <label class="field-label">Nombre alerta</label>
              <div class="input-container">
                <input type="text" [(ngModel)]="nombreAlerta" placeholder="Ingresa el nombre de la alerta">
              </div>
            </div>
            
            <div class="form-item">
              <label class="field-label">Tipo</label>
              <div class="segmented-button tipo-toggle">
                <button 
                  type="button"
                  [class.selected]="tipoSeleccionado === 'Tiempo'"
                  (click)="tipoSeleccionado = 'Tiempo'"
                  class="tipo-btn left"
                >
                  Tiempo
                </button>
                <button 
                  type="button"
                  [class.selected]="tipoSeleccionado === 'Distancia'"
                  (click)="tipoSeleccionado = 'Distancia'"
                  class="tipo-btn right"
                >
                  Distancia
                </button>
              </div>
            </div>
          </div>

          <!-- Fila 2: Repetir Alerta y Valor -->
          <div class="form-row">
            <div class="form-item">
              <label class="checkbox-wrapper">
                <input type="checkbox" [(ngModel)]="repetirAlerta">
                <span class="checkmark">✓</span>
                Repetir Alerta
              </label>
            </div>
            
            <div class="form-item">
              <label class="field-label">Valor (tiempo/distancia)</label>
              <div class="input-container">
                <input type="text" [(ngModel)]="valor" placeholder="Ej: 30 min o 5 km">
              </div>
            </div>
          </div>

          <!-- Cantidad repeticiones -->
          <div class="form-item">
            <label class="field-label">Cantidad repeticiones</label>
            <div class="x--deprecated--segmented-button_62332-8928">
              <button 
                type="button"
                [class.selected]="repeticiones === 1"
                (click)="repeticiones = 1"
                class="segment-start_I62332-8928-53923-36682"
              >
                1
              </button>
              <button 
                type="button"
                [class.selected]="repeticiones === 2"
                (click)="repeticiones = 2"
                class="segment-2_I62332-8928-53923-36683"
              >
                2
              </button>
              <button 
                type="button"
                [class.selected]="repeticiones === 3"
                (click)="repeticiones = 3"
                class="segment-end_I62332-8928-53923-36684"
              >
                3
              </button>
            </div>
          </div>
        </div>

        <!-- Separador vertical - SOLO UNO -->
        <div class="vertical-full-width_62332-8907">
          <div class="divider_I62332-8907-51816-5863"></div>
        </div>

        <!-- Columnas combinadas: Plantilla/Notificación y Switches -->
        <div class="form-columns-right">
          
          <!-- Columna 2: Plantilla y Notificación -->
          <div class="form-column plantilla-notificacion">
            
            <!-- 2. Plantilla -->
            <div class="section">
              <h2 class="section-title">
                <span class="section-number">2.</span>
                Plantilla
              </h2>
              
              <!-- Plantilla textarea -->
              <div class="form-item">
                <label class="field-label">Plantilla</label>
                <div class="text-field_62332-8912">
                  <div class="text-field_I62332-8912-52798-25506">
                    <div class="state-layer_I62332-8912-52798-25507">
                      <div class="content_I62332-8912-52798-25508">
                        <textarea 
                          [(ngModel)]="plantilla" 
                          placeholder="Escribe el mensaje de la alerta..." 
                          class="textarea-field"
                          rows="3"
                        ></textarea>
                      </div>
                    </div>
                  </div>
                </div>
                <span class="field-description">0/100</span>
              </div>
            </div>

            <!-- 3. Notificación -->
            <div class="section">
              <h2 class="section-title">
                <span class="section-number">3.</span>
                Notificación
              </h2>
              
              <!-- Seleccionar audio -->
              <div class="form-item">
                <label class="field-label">Seleccionar audio</label>
                <div class="input-container">
                  <input type="text" [(ngModel)]="audioSeleccionado" placeholder="Elige un sonido de notificación">
                </div>
              </div>
            </div>
          </div>

          <!-- Columna 3: Switches -->
          <div class="form-column switches-column">
            
            <!-- Activar vibración -->
            <div class="form-item">
              <label class="field-label">Activar vibración</label>
              <div class="segmented-button switch-toggle">
                <button 
                  type="button"
                  [class.selected]="activarVibracion === true"
                  (click)="activarVibracion = true"
                  class="switch-btn left"
                >
                  Sí
                </button>
                <button 
                  type="button"
                  [class.selected]="activarVibracion === false"
                  (click)="activarVibracion = false"
                  class="switch-btn right"
                >
                  No
                </button>
              </div>
            </div>

            <!-- Activar notificación -->
            <div class="form-item">
              <label class="field-label">Activar notificación</label>
              <div class="segmented-button switch-toggle">
                <button 
                  type="button"
                  [class.selected]="activarNotificacion === true"
                  (click)="activarNotificacion = true"
                  class="switch-btn left"
                >
                  Sí
                </button>
                <button 
                  type="button"
                  [class.selected]="activarNotificacion === false"
                  (click)="activarNotificacion = false"
                  class="switch-btn right"
                >
                  No
                </button>
              </div>
            </div>

            <!-- Botón Guardar -->
            <div class="form-item guardar-container">
              <button 
                type="button" 
                class="guardar-btn"
                (click)="onGuardar()"
              >
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Guardar
              </button>
            </div>
          </div>

        </div>

      </div>
    </div>

    <!-- Preview Cards -->
    <div class="preview-cards">
      <app-stacked-card
        *ngFor="let alert of alertas; trackBy: trackByAlertId"
        [titleText]="alert.titleText"
        [subtitleText]="alert.subtitleText"
        [supportingText]="alert.supportingText"
        [headerText]="'Header'"
        [subheadText]="'Subhead'"
        [showSecondaryAction]="false"
        [style]="'Elevated'"
        [layout]="'Media & text'"
        [buttonText]="'Ver más'"
        [imageUrl]="alert.imageUrl || ''"
        (viewMoreClicked)="onCardViewMore(alert.id)"
        class="preview-card"
      ></app-stacked-card>
    </div>
  </div>
</div>
